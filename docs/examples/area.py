from pyl7plot import Plot, JS

data = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "id": 611100396,
                "name": "房山其它",
                "longitude": 115.83198379305,
                "latitude": 39.723520051189,
                "unit_price": 25895,
                "count": 44
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [
                            115.926666,
                            39.872841
                        ],
                        [
                            115.94607,
                            39.898752
                        ],
                        [
                            115.968348,
                            39.927972
                        ],
                        [
                            115.839279,
                            39.909157
                        ],
                        [
                            115.511612,
                            39.703872
                        ],
                        [
                            115.500257,
                            39.658267
                        ],
                        [
                            115.593106,
                            39.598025
                        ],
                        [
                            115.685955,
                            39.61548
                        ],
                        [
                            115.696591,
                            39.605919
                        ],
                        [
                            115.700328,
                            39.597469
                        ],
                        [
                            115.703778,
                            39.590018
                        ],
                        [
                            115.699322,
                            39.582344
                        ],
                        [
                            115.697885,
                            39.575226
                        ],
                        [
                            115.704784,
                            39.570665
                        ],
                        [
                            115.712401,
                            39.575337
                        ],
                        [
                            115.748334,
                            39.563768
                        ],
                        [
                            115.760694,
                            39.554645
                        ],
                        [
                            115.756095,
                            39.548191
                        ],
                        [
                            115.755951,
                            39.523775
                        ],
                        [
                            115.841039,
                            39.511975
                        ],
                        [
                            115.83297051924,
                            39.533027115315
                        ],
                        [
                            115.83414,
                            39.551154
                        ],
                        [
                            115.851962,
                            39.558942
                        ],
                        [
                            115.876109,
                            39.558052
                        ],
                        [
                            115.885882,
                            39.55872
                        ],
                        [
                            115.898818,
                            39.565172
                        ],
                        [
                            115.893069,
                            39.574962
                        ],
                        [
                            115.90198,
                            39.580523
                        ],
                        [
                            115.910316,
                            39.594536
                        ],
                        [
                            115.919802,
                            39.593424
                        ],
                        [
                            115.92009,
                            39.598539
                        ],
                        [
                            115.922677,
                            39.602542
                        ],
                        [
                            115.937624,
                            39.601875
                        ],
                        [
                            115.958896,
                            39.574294
                        ],
                        [
                            115.983618,
                            39.576741
                        ],
                        [
                            115.982972,
                            39.600587
                        ],
                        [
                            115.989116,
                            39.600476
                        ],
                        [
                            116.001333,
                            39.599169
                        ],
                        [
                            116.013406,
                            39.597807
                        ],
                        [
                            116.008196,
                            39.581487
                        ],
                        [
                            116.012508,
                            39.581098
                        ],
                        [
                            116.010496,
                            39.579263
                        ],
                        [
                            115.938596,
                            39.857777
                        ],
                        [
                            115.926666,
                            39.872841
                        ]
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "id": 611100406,
                "name": "延庆其它",
                "longitude": 115.94508430604,
                "latitude": 40.444965974096,
                "unit_price": 26633,
                "count": 12
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [
                            116.462973,
                            40.696243
                        ],
                        [
                            116.461392,
                            40.703846
                        ],
                        [
                            116.458805,
                            40.714948
                        ],
                        [
                            116.457367,
                            40.720416
                        ],
                        [
                            116.470518,
                            40.664401
                        ],
                        [
                            116.467285,
                            40.677534
                        ],
                        [
                            116.4652,
                            40.687436
                        ],
                        [
                            116.462973,
                            40.696243
                        ]
                    ]
                ]
            }
        },
    ]
}

areaMap = Plot("Area")

areaMap.set_options({
    "map": {
        "type": "mapbox",
        "style": "light",
        "center": [120.19382669582967, 30.258134],
        "zoom": 3,
    },
    "autoFit": True,
    "source": {
        "data": data,
        "parser": {"type": "geojson"},
    },
    "color": {
        "field": "count",
        "value": ["rgb(65,182,196)", "rgb(29,145,192)", "rgb(34,94,168)", "rgb(12,44,132)"],
        "scale": {"type": "quantize"},
    },
    "state": {"active": True, "select":  True},
    "legend": {"position": "bottomleft"},
    "tooltip": {
        "items": ["title", "count"],
    },
})

areaMap.render("area-map.html")
